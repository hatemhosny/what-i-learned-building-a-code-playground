<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>What I Learned Building a Code Playground</title><link rel="stylesheet" href="https://unpkg.com/reveal.js@4.6.1/dist/reveal.css"><link rel="stylesheet" href="https://unpkg.com/reveal.js@4.6.1/dist/theme/white.css"><link rel="stylesheet" href="https://unpkg.com/reveal.js@4.6.1/plugin/highlight/monokai.css"><link rel="stylesheet" href="./style.css"><script src="https://unpkg.com/es-module-shims@1.4.4/dist/es-module-shims.js" async=""></script><script type="importmap">{"imports": {
  "reveal.js@4.6.1": "https://jspm.dev/reveal.js@4.6.1",
  "reveal.js@4.6.1/plugin/markdown/markdown.esm.js": "https://jspm.dev/reveal.js@4.6.1/plugin/markdown/markdown.esm.js",
  "reveal.js-mermaid-plugin@2.0.0/plugin/mermaid/mermaid.esm.js": "https://jspm.dev/reveal.js-mermaid-plugin@2.0.0/plugin/mermaid/mermaid.esm.js",
  "reveal.js@4.6.1/plugin/highlight/highlight.esm.js": "https://jspm.dev/reveal.js@4.6.1/plugin/highlight/highlight.esm.js",
  "livecodes@0.2.0": "https://jspm.dev/livecodes@0.2.0",
  "uuid": "https://jspm.dev/uuid"
}}</script></head><body><div class="reveal">
  <div class="slides">

    <section data-visibility="!hidden" class="home">
      <img id="home-bg" src="https://hatemhosny.github.io/livecodes-assets/assets/169573984565342147902496/lessons-learned-bg.jpg">
      <h2>What I Learned Building a Code Playground</h2>
      <img id="think-learn" src="https://hatemhosny.github.io/livecodes-assets/assets/169573987598111608420099/lessons-learned.png">
      <div class="author">Hatem Hosny</div>
    </section>

    <section data-visibility="!hidden" data-title="Agenda" class="align-left">
      <h2>Agenda</h2>
      <ul>
        <li>Introduction</li>
        <li>Challenges and Decisions
          <ul>
            <li>Web Platform</li>
            <li>Client-Server Interface</li>
            <li>Performance</li>
            <li>Security</li>
          </ul>
        </li>
        <li>Conclusions</li>
      </ul>
    </section>

    <section data-visibility="!hidden" data-title="Disclosures">
      <h2>Disclosures</h2>
      <p class="fragment">I'm a doctor!</p>
      <p class="fragment">... and the author of LiveCodes</p>
    </section>

    <section data-visibility="!hidden" data-title="LiveCodes">
      <h2>LiveCodes</h2>
      <img height="200" src="https://livecodes.io/livecodes/assets/images/livecodes-logo.svg">
      <p>A Code Playground That Just Works!</p>
      <p>
        <a href="https://livecodes.io" target="_blank">https://livecodes.io</a>
      </p>
    </section>

    <section data-visibility="!hidden" data-title="LiveCodes screenshot">
      <img src="https://livecodes.io/docs/img/screenshots/react-template.png">
    </section>

    <section data-visibility="!hidden" data-title="Language Support">
      <h2>Language Support</h2>
      <img src="https://hatemhosny.github.io/livecodes-assets/assets/169573989309196876853454/languages.png">
    </section>

    <section data-visibility="!hidden" data-title="Features">
      <h2>Features</h2>
      <img src="https://hatemhosny.github.io/livecodes-assets/assets/169573989962828990321891/features.png">
    </section>

    <section data-visibility="!hidden" data-title="Embedded Playgrounds" class="align-left">
      <h2>Embedded Playgrounds</h2>
      <ul>
        <li>Can be embedded in any web page</li>
        <li>Powerful SDK
          <ul>
            <li>JavaScript/TypeScript</li>
            <li>React</li>
            <li>Vue</li>
            <li>Svelte</li>
          </ul>
        </li>
        <li>Communicate with embedded playgrounds</li>
      </ul>
    </section>

    <section data-visibility="!hidden" data-title="Client-Side" class="align-left">
      <h2>Client-Side!</h2>
      <ul>
        <li>Yes, all compilers run in the browser!</li>
        <li>No server rounds</li>
        <li>No servers to configure (or pay for!)</li>
        <li>All projects are private by default</li>
        <li>Free with unlimited usage</li>
        <li>Can be self-hosted on any static file server</li>
      </ul>
    </section>

    <section data-visibility="!hidden" data-title="Free and Open-Source" class="align-left">
      <h2>Free and Open-Source</h2>
      <ul>
        <li>MIT License</li>
        <li>No limits for use</li>
        <li>No ads</li>
        <li>No accounts required</li>
      </ul>
      <p>&nbsp;</p>
      <p><a href="https://github.com/live-codes/livecodes" target="_blank">https://github.com/live-codes/livecodes</a></p>
    </section>

    <section data-visibility="!hidden" data-title="Challenges">
      <h2>Challenges</h2>
    </section>

    <section data-visibility="!hidden" data-title="Challenge: Run 80+ Languages">
      <h2>Run 80+ Languages</h2>
    </section>

    <section data-visibility="!hidden" data-title="Languages: Run 80+ Languages" class="align-left">
      <h2>Run 80+ Languages</h2>
      <ul>
        <li>Options:
          <ul>
            <li class="fragment">Servers</li>
            <li class="fragment">Web Containers</li>
            <li class="fragment">Use the platform!
              <ul>
                <li class="fragment">JavaScript</li>
                <li class="fragment">WebAssembly (Wasm)</li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </section>

    <section data-visibility="!hidden" data-title="Languages: [Diagram] Languages">
      <h2>Languages</h2>
      <div class="mermaid fragment">
        <pre>          graph LR
              A[/Language A\n`compiles to JS`/]
              B{{Language B\n`JS runtime`}}
              C&gt;Language C\n`Wasm runtime`]
        </pre>
      </div>
    </section>

    <section data-visibility="!hidden" data-title="Languages: [Diagram] Create Compilers">
      <h2>Create Compilers</h2>
      <div class="mermaid fragment">
        <pre>          graph LR
              comp[Create Compiler] -- Config --&gt; A[/Language A\n`compiles to JS`/]
              comp -- Config --&gt; B{{Language B\n`JS runtime`}}
              comp -- Config --&gt; C&gt;Language C\n`Wasm runtime`]
              A -- "⌛" --&gt; fnA(fn A)
              fnA -- code --&gt; Script
              B -- "⌛" --&gt; fnB(fn B)
              fnB -- code --&gt; Script
              C -- "⌛" --&gt; fnC(fn C)
              fnC -- code --&gt; Script
        </pre>
      </div>
    </section>

    <section data-visibility="!hidden" data-title="Languages: [Code] Compiler" data-markdown="">
      <textarea data-template="">        ## Compiler
        ```ts [1|2|8-11|3-5]
        export interface Compiler {
          factory: (config: Config) =&gt; CompilerFunction;
          url?: string;
          scripts?: string[],
          // ...
        }

        export type CompilerFunction = (code: string) =&gt; Promise&lt;string&gt;;
        ```
      </textarea>
    </section>

    <section data-visibility="!hidden" data-title="Languages: [Code] TS lang specs" data-markdown="">
      <textarea data-template="">        ## Example
        ```ts [1-5|6-8|9-12]
        export const languageA: LanguageSpecs = {
          name: 'language A',
          compiler: {
            factory:
              async (config) =&gt; {
                // lazy-load large file
                const langA = await import('./lang-a-compiler.js');
                const compiler = langA.compiler(config);
                return async (code) =&gt; {
                  const js = await compiler.compileToJs(code);
                  return js;
                }
              }
          },
          // ...
        };
        ```
      </textarea>
    </section>

    <section data-visibility="!hidden" data-title="Languages: [Code] TS lang specs" data-markdown="">
      <textarea data-template="">        ## Example
        ```ts [1-5|6-12]
        export const languageC: LanguageSpecs = {
          name: 'language C',
          compiler: {
            factory:
              async (config) =&gt; {
                return async (code) =&gt; {
                  const script = `
                  const mod = await import('./wasm-runtime.js');
                  mod.runInWasm(${code}, ${JSON.stringify(config)});
                  `
                  return script;
                }
              }
          },
          // ...
        };
        ```
      </textarea>
    </section>

    <section data-visibility="!hidden" data-title="Languages: [LiveCodes]">
        <h2>Demo: Python (Pyodide)</h2>
        <div id="pyodide-demo" class="livecodes" data-height="70vh"></div>
    </section>

    <section data-visibility="!hidden" data-title="Challenge: Importing npm Modules">
      <h2>Importing npm Modules</h2>
    </section>

    <section data-visibility="!hidden" data-title="Importing npm Modules: [LiveCodes]">
        <h2>Importing <span style="text-transform: lowercase">npm<span> Modules</span></span></h2>
        <div id="modules-demo" class="livecodes" data-height="70vh"></div>
    </section>

    <section data-visibility="!hidden" data-title="Importing npm Modules: error" class="align-left">
        <h2>Importing <span style="text-transform: lowercase">npm<span> Modules</span></span></h2>
        <p><code>import {v4} from "uuid"</code></p>
        <div class="fragment error">Uncaught TypeError: Failed to resolve module specifier "uuid". Relative references must start with either "/", "./", or "../".</div>
    </section>

    <section data-visibility="!hidden" data-title="Importing npm Modules: URL" class="align-left">
        <h2>Importing <span style="text-transform: lowercase">npm<span> Modules</span></span></h2>
        <p><code>import {v4} from "https://jspm.dev/uuid"</code></p>
        <div class="error" style="visibility: hidden">Uncaught TypeError: Failed to resolve module specifier "uuid". Relative references must start with either "/", "./", or "../".</div>
    </section>

    <section data-visibility="!hidden" data-title="Importing npm Modules: [Code] Import Maps" data-markdown="">
      <textarea data-template="">        ## Import Maps
        ```html [1,7|2-6|9-12]
        &lt;script type="importmap"&gt;
        {
          "imports": {
            "uuid": "https://jspm.dev/uuid"
          }
        }
        &lt;/script&gt;

        &lt;script type="module"&gt;
          import { v4 } from "uuid";
          document.body.innerHTML += v4();
        &lt;/script&gt;
        ```
      </textarea>
    </section>

    <section data-visibility="!hidden" data-title="Importing npm Modules: [Code] Regex" data-markdown="">
      <textarea data-template="">        ## Getting Imports
        ```ts []
        const importsPattern =
          /(import\s+?(?:(?:(?:[\w*\s{},\$]*)\s+from\s+?)|))((?:".*?")|(?:'.*?'))([\s]*?(?:;|$|))/g;

        const dynamicImportsPattern = /(import\s*?\(\s*?((?:".*?")|(?:'.*?'))\s*?\))/g;
        ```
      </textarea>
    </section>

    <section data-visibility="!hidden" data-title="Importing npm Modules: [Image] Regex">
      <img src="https://hatemhosny.github.io/livecodes-assets/assets/169584838629216468023216/regex-meme.jpg" style="height: 70vh">
    </section>

    <section data-visibility="!hidden" data-title="Challenge: App vs. SDK Versions">
      <h2>App vs. SDK Versions</h2>
    </section>

    <section data-visibility="!hidden" data-title="SDK: Demo">
      <h2>SDK</h2>
      <iframe src="https://hatemhosny.github.io/interactive-coding-tutorial/" class="demo-iframe"></iframe>
    </section>

    <section data-visibility="!hidden" data-title="SDK: [Code]" data-markdown="">
      <textarea data-template="">        ## SDK
        ```html []
        &lt;div id="container"&gt;&lt;/div&gt;

        &lt;script type="module"&gt;
        import { createPlayground } from 'https://unpkg.com/livecodes';

        createPlayground('#container', {
          params: {
            markdown: '# Hello LiveCodes!',
            css: 'h1 {color: dodgerblue;}',
            js: 'console.log("Hello, from JS!");',
            console: 'open',
          },
        });
        &lt;/script&gt;
        ```
      </textarea>
    </section>

    <section data-visibility="!hidden" data-title="SDK: [Code] Permanent URL" data-markdown="">
      <textarea data-template="">        ## Permanent URL
        ```html [4,7]
        &lt;div id="container"&gt;&lt;/div&gt;

        &lt;script type="module"&gt;
        import { createPlayground } from 'https://unpkg.com/livecodes@0.2.0';

        createPlayground('#container', {
          appUrl: 'https://v14.livecodes.io',
          params: {
            markdown: '# Hello LiveCodes!',
            css: 'h1 {color: dodgerblue;}',
            js: 'console.log("Hello, from JS!");',
            console: 'open',
          },
        });
        &lt;/script&gt;
        ```
      </textarea>
    </section>

    <section data-visibility="!hidden" data-title="SDK: [Diagram] Automated Releases">
      <h2>Automated Releases</h2>
      <div class="mermaid fragment">
        <pre>          graph LR
              release[Release] --&gt; SDK
              SDK -- GH Actions --&gt; npm
              npm --&gt; sdkV["livecodes@0.2.0"]
              sdkV --&gt; CDNs
              SDK -- commits --&gt; notes[CHANGE LOG]
              release --&gt; App
              App -- commits --&gt; notes
              notes --&gt; ghRelease[GitHub Release]
              App -- GH Actions --&gt; PR[PR -&gt; main]
              PR -- CF Pages --&gt; Preview
              Preview -- DNS API --&gt; Subdomain[v14.livecodes.io]
              PR -- merge --&gt; Deploy
              Deploy --&gt; Domain[livecodes.io]
        </pre>
      </div>
    </section>

    <section data-visibility="!hidden" data-title="Challenge: Compiler Performance">
      <h2>Compiler Performance</h2>
    </section>

    <section data-visibility="!hidden" data-title="Challenge: Security">
      <h2>Security</h2>
    </section>

    <section data-visibility="!hidden" data-title="Technology Stack" class="align-left">
      <h2>Technology Stack</h2>
      <p class="fragment">(a.k.a. Personal Preferences!)</p>
      <ul>
        <li class="fragment">"Vanilla" TypeScript</li>
        <li class="fragment">NEVER use classes or <code class="inline">this</code>!</li>
        <li class="fragment">Build system: Esbuild</li>
        <li class="fragment">Testing: Playwright &amp; Jest</li>
        <li class="fragment">Docs: Docusaurus</li>
        <li class="fragment">CI/CD: GitHub Actions</li>
        <li class="fragment">Hosting: Cloudflare Pages</li>
        <li class="fragment">Backend: None :)</li>
      </ul>
    </section>

    <section data-visibility="!hidden" data-title="Future" class="align-left">
      <h2>Future</h2>
      <ul>
        <li class="fragment">Offline!</li>
        <li class="fragment">Source control</li>
      </ul>
    </section>

    <section data-visibility="!hidden" data-title="Conclusions" class="align-left">
      <h2>Conclusions</h2>
      <ul>
        <li class="fragment">Open-Source = ❤️</li>
        <li class="fragment">Keep learning and building</li>
      </ul>
    </section>

    <section data-visibility="!hidden" data-title="References" class="align-left">
      <h2>References</h2>
      <ul class="small">
        <li>https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script/type/importmap</li>
        <li>https://github.com/WICG/import-maps</li>
        <li>https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers</li>
        <li>https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs</li>
        <li>https://web.dev/sandboxed-iframes/</li>
      </ul>
    </section>

  </div>
</div>
<script src="./script.js" type="module"></script></body></html>